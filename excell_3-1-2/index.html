<html>
	<head>
		<meta charset="utf-8">
		<title>Supplemental Exercise 3.1.2</title>

		<link href="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.0.4/css/bootstrap.min.css" rel="stylesheet">
		<link href="css/main.css" rel="stylesheet">

		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
		<script src="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.0.4/bootstrap.min.js"></script>

		<script>
		var options = new Array("Cash","Accounts Payable","Accounts Receivable","Service Revenue","Supplies Expense","Supplies Payable","Supplies","Equipment","Salaries Expense","Prepaid Insurance","Equipment Repairs Expense","Dividends","Salaries and Wages Expense","Notes Payable","Retained Earnings","Maintenance and Repairs Expense","Salaries and Wages Payable","Common Stock","Insurance Expense","Office Supplies","Unearned Service Revenue","Rent Expense");

		var num_rows = 1;

		// Column names
			var columns = {
				0:'.account',
				1:'.debit',
				2:'.credit'
			};

		
		// Set solution tables
		var solution = new Array();
		solution[0] = [options[0],8300,0];
		solution[1] = [options[2],6240,0];
		solution[2] = [options[6],2300,0];
		solution[3] = [options[7],12770,0];
		solution[4] = [options[1],0,1600];
		solution[5] = [options[16],0,4250];
		solution[6] = [options[20],0,0];
		solution[7] = [options[17],0,23000];
		solution[8] = [options[3],0,6300];
		solution[9] = [options[12],4250,0];
		solution[10] = [options[2100],730,0];
		solution[11] = [options[11],560,0];
	

		function add_row(){

			num_rows++;
			$('#container').append(function(){
				var html = $('#container div.row:first').html();
				return '<div id="'+ num_rows +'" class="row">'+ html +'</div>';
			});
			$('.add_row').html('&nbsp;');
			$('.row:last div.add_row').html('<button id="add_row_btn" onClick="javascript:add_row();">Add a row</button>');
			$('.row div.add_row').append(function(){
				return '<span class="num">'+ $(this).parent().attr('id') + '</span>';
			});


			for(var i = 0; i < 3;i++) {
				$('#'+ num_rows +'.row select.' + i).removeClass('bad');
				$('#'+ num_rows +'.row select.' + i).removeClass('good');
				$('#'+ num_rows +'.row input.' + i).removeClass('bad');
				$('#'+ num_rows +'.row input.' + i).removeClass('good');
			}
		}

		function compare (){
			var totalDebit = 0;
			var totalCredit = 0;
			console.log('Compare!' + solution.length);
			for(i = 0; i < solution.length; i++){

				$('#'+ (i+1) +'.row select option:selected').each(function (x,val){
					console.log(solution[i][x] + " = " + val.value);
					if(solution[i][x] == val.value){
						$('#'+ (i+1) +'.row select.' + x).removeClass('bad');
						$('#'+ (i+1) +'.row select.' + x).addClass('good');
					} else {
						$('#'+ (i+1) +'.row select.' + x).removeClass('good');
						$('#'+ (i+1) +'.row select.' + x).addClass('bad');
					}
				});
				$('#'+ (i+1) +'.row input').each(function (x,val){
					n = x + 1;
					console.log(solution[i][n] + " = " + $(val).val());
					if($(val).val() == ''){
						var tmpVal = 0;
					}else{
						var tmpVal = $(val).val();
					}
					if (n == 1) {
						totalDebit += parseFloat(tmpVal);
					} else if (n == 2) {
						totalCredit += parseFloat(tmpVal);
					}

					if(solution[i][n] == tmpVal){
						$('#'+ (i+1) +'.row input.' + n).removeClass('bad');
						$('#'+ (i+1) +'.row input.' + n).addClass('good');
					} else {
						$('#'+ (i+1) +'.row input.' + n).removeClass('good');
						$('#'+ (i+1) +'.row input.' + n).addClass('bad');
					}

					if(totalDebit == totalCredit && totalDebit == 35150 && totalCredit == 35150){
						$('#totalDebit').removeClass('bad');
						$('#totalDebit').addClass('good');
						$('#totalCredit').removeClass('bad');
						$('#totalCredit').addClass('good');
					}else{
						$('#totalDebit').removeClass('good');
						$('#totalDebit').addClass('bad');
						$('#totalCredit').removeClass('good');
						$('#totalCredit').addClass('bad');
					}


				});
			}

			$("#totalDebit").html(totalDebit);
			$("#totalCredit").html(totalCredit);
		}


		$(function(){
				
			/*$(window).bind('beforeunload', function(){
				return 'Leaving this page will wipe all your data.';
			});*/

			//Generate options
			for(var i = 0; i<options.length;i++) {
				console.log(i, options[i]);
				var html = '<option>' + options[i] + '</option>';
				$('select').append(html);
			}

			$('.row:last .add_row').html('<button id="add_row_btn" onClick="javascript:add_row();">Add a row</button>');

			$('input').live("focusout", function(){
				compare();
			});

			$('select').live("focusout", function(){
				compare();
			});


		});
		
		$(document).ready(function() {
			$(window).on('beforeunload', function() {
				return 'Leaving this page will clear all the work you\'ve done.';
			});
			
			
		});

		</script>
	</head>

	<body>
	<div id="content">
		<button class="printBtn" onclick="window.print();">Print this Page</button>
		<h1>Supplemental Exercise 3.1.2</h1>
		<h2>McKay Corp.</h2>
		<br>
		<section id="question">
			<p>The trial balance of McKay Corp. as of April 30<sup>th</sup> is given below.</p>
			
			[Insert Trial Balance Sheet Here]<br><br>
			
			<strong>April Transactions:</strong>
			<ul>
				<li><strong>3<sup>rd</sup>:</strong> Received $2,840 cash from customers for accounts receivable due.</li>
				<li><strong>9<sup>th</sup>:</strong> Billed customer $3,850 for services performed.</li>
				<li><strong>17<sup>th</sup>:</strong> Owe employees $4,250 for services performed.</li>
				<li><strong>23<sup>rd</sup>:</strong> Performed $2,450 worth of service for customer who paid in advance in January.</li>
				<li><strong>28<sup>th</sup>:</strong> Paid Creditors $2,350 for accounts payable.</li>
				<li><strong>29<sup>th</sup>:</strong> Paid cash dividends of $560.</li>
				<li><strong>30<sup>th</sup>:</strong> Paid Rent for $730.</li>
			</ul>
			
			<strong>Instructions:</strong>
			<!-- Because the Journal entries will affect the T accounts general ledger, it may be a good idea to move #1 to #2 instead -->
			<ol>
				<li>Prepare a general ledger using T Accounts. Enter the opening balances in the ledger as of April 1.
					Prepare the following additional accounts
					<ul>
						<li>Dividends</li>
						<li>Service Revenue</li>
						<li>Salaries and Wages Payable</li>
						<li>Rent Expenses</li>
						<li>Salary and Wages Expense</li>
					</ul>
				</li>
				<li>Journalize the transactions, excluding explanations.</li>
				<li>Post the entries to the ledger accounts.</li>
				<li>Prepare a trial balance for McKay Corp. at April 30, 20xx.</li>
			</ol>
		</section>
		
		<section id="problems">
			<h3>Journal</h3>
			New code.
			
			<hr>
			<h3>T accounts</h3>
			New code.
			
			<hr>
			<h3>Trial Balance</h3>
			<div id="legends">
				<div id="account" class="title">Account</div>
				<div id="debit" class="title">Debit</div>
				<div id="credit" class="title">Credit</div>
			</div>
			<div id="container">
				<div id="1" class="row">
					<div class="add_row"></div>
					<div id="account">
						<select class="account_1 0">
							<option>Choose a description</option>
						</select>

						$<input id="deb" class="amount 1 debit" type="text">

						$<input class="amount 2 credit" type="text">
					</div>
				</div>
			</div>
			<div id="totalDebit"></div>
			<div id="totalCredit"></div>
		</section>
	</div>
	</body>
</html>